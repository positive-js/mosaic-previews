<div class="docs-markdown"><p class="docs-markdown__p">Модальный диалог открывается окном поверх страницы, затемняет нижний слой и блокирует всякое взаимодействие с ним. Модальный диалог фокусирует внимание пользователя на своём содержании. </p>
<div mosaic-docs-example="modal-component"></div>


        <div class="docs-header-link docs-header-link_3">
          <span header-link="когда-использовать" id="когда-использовать"></span>
          Когда использовать
        </div>
      <p class="docs-markdown__p">Используйте модальные диалоги для решения краткосрочных задач, операций, вызванных пользователем (можно открыть короткую форму, настройки). Бывает удобно показать скрытый контент в модальном окне. Модалки помогают эффективно решать задачи без потери контекста основной страницы. Несмотря на универсальность, модальные окна подходят <a class="docs-markdown__a" href="/modal/overview#%D1%81%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B" target="_blank">не для всех ситуаций</a>.</p>

        <div class="docs-header-link docs-header-link_3">
          <span header-link="структура-компонента" id="структура-компонента"></span>
          Структура компонента
        </div>
      <ul class="docs-markdown__ul">
<li class="docs-markdown__li">Шапка. Заголовок диалога</li>
<li class="docs-markdown__li">Действие «Закрыть»</li>
<li class="docs-markdown__li">Тело. Содержит текст сообщения, вопрос, элементы управления и поля ввода</li>
<li class="docs-markdown__li">Футер. Кнопки действий, возможность отменить операцию или закрыть диалог</li>
</ul>
<p class="docs-markdown__p">Многих этих частей может не быть. Обязательно должно остаться тело и возможность закрыть диалог. Обязательный способ закрыть диалог — крестик в шапке или кнопка Отмена/Закрыть в футере.</p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="простой-диалог-без-шапки" id="простой-диалог-без-шапки"></span>
          Простой диалог без шапки
        </div>
      <p class="docs-markdown__p">Похож на алерт браузера. Используйте, когда система задает один вопрос или сообщает короткую новость, когда ожидается избыточное дублирование текста в заголовке и теле модального окна. У таких диалогов в правом верхнем иглу нет иконки-крестика «Закрыть»</p>
<div mosaic-docs-example="modal-overview"></div>


        <div class="docs-header-link docs-header-link_3">
          <span header-link="описание-работы" id="описание-работы"></span>
          Описание работы
        </div>
      <p class="docs-markdown__p">Страница затемняется, с ней нельзя взаимодействовать: нельзя нажимать кнопки, нет ховера, прокрутки и тп. Поверх затемнения открывается окно модального диалога.</p>
<p class="docs-markdown__p">Диалог может открыться по действию пользователя. После активации кнопки и тп. Система также может блокировать работу пользователя модальным диалогом. По возможности стоит избегать такого резкого вмешательства.</p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="как-закрыть-диалог" id="как-закрыть-диалог"></span>
          Как закрыть диалог
        </div>
      <ul class="docs-markdown__ul">
<li class="docs-markdown__li">Выполнение основного или второстепенных действий диалога (кнопки в футере)</li>
<li class="docs-markdown__li">Кнопка Отмена&lt; или Закрыть в футере</li>
<li class="docs-markdown__li">Крестик в шапке, если без заголовка диалога никак</li>
<li class="docs-markdown__li">Клик вне модального окна. По умолчанию модалку нельзя закрыть кликом вне окна, но такая опция должна быть доступна по требованию проектировщика. Полезно для окон с чисто информационным содержимым, где нет риска потери данных и где система не ждет явного ответа от пользователя (например, диалог да/нет с кнопкой отмена)</li>
<li class="docs-markdown__li">Клавиша ESC ( эквивалентно действию Отмена)</li>
</ul>
<p class="docs-markdown__p">Не стоит закрывать модальное окно автоматически по таймауту. Пользователь может не успеть изучить информацию внутри него</p>
<p class="docs-markdown__p">Иногда система не может позволить вернуться  к взаимодействию со страницей. Даже в этой ситуации модальное окно не должно быть тупиком в сценарии использования, надо предложить варианты действий. Например, если система показывает окно об истёкшей сессии, вернуться к странице на заднем фоне нельзя, нужно  предложить пройти на страницу логина и попытаться войти заново.</p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="запоминать-данные-пользователя" id="запоминать-данные-пользователя"></span>
          Запоминать данные пользователя
        </div>
      <p class="docs-markdown__p">Если в окне были введены какие-то данные, запоминать их и заново показывать при повторном открытии диалога. Например, когда была попытка заполнить форму создания. Если была открыта форма редактирования в модалке, ее начали менять, но не сохранили, а закрыли. При повторном открытии не надо подставлять несохраненные данные.</p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="прокрутка" id="прокрутка"></span>
          Прокрутка
        </div>
      <p class="docs-markdown__p">Задний фон страницы не прокручивается. Высота модального окна определяется содержимым. Окно растягивается по высоте и занимает всю доступную высоту экрана за вычетом отступов 48px по краям.</p>
<p class="docs-markdown__p">Прокручивается только центральная часть (тело) диалога. Шапка и футер остаются в видимой области. Они отбрасывают тень. Полоса прокрутки появляется внутри блока содержимого модального окна. Она должна быть прижата к правой границе окна, без отступа.</p>
<p class="docs-markdown__p">Длинная модалка — верный признак, что надо использовать <a class="docs-markdown__a" href="./modal/overview#%D1%81%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B" target="_blank">другой компонент или отдельную страницу</a>. </p>
<div mosaic-docs-example="modal-scroll"></div>


        <div class="docs-header-link docs-header-link_4">
          <span header-link="фокус-и-работа-с-клавиатурой" id="фокус-и-работа-с-клавиатурой"></span>
          Фокус и работа с клавиатурой
        </div>
      <p class="docs-markdown__p">При открытом модальном диалоге фокус перемещается только по элементам внутри окна включая крестик и кнопки в футере. Фокус не выходит за пределы.</p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="фокус-при-открытии-модального-диалога" id="фокус-при-открытии-модального-диалога"></span>
          Фокус при открытии модального диалога
        </div>
      <p class="docs-markdown__p">Когда открывается диалог, фокус перемещается к элементу внутри диалога. Расположение фокуса зависит от характера и размера содержимого.</p>
<ul class="docs-markdown__ul">
<li class="docs-markdown__li">Фокус устанавливается на первый доступный элемент внутри тела диалога, если нет особых предписаний</li>
<li class="docs-markdown__li">Если в диалоге есть форма, то надо ставить фокус в первое поле ввода</li>
<li class="docs-markdown__li">Если окно диалога содержит важное необратимое действие, то лучше поставить фокус на другое менее деструктивное. </li>
<li class="docs-markdown__li">Если в диалоге есть только терминальные кнопки, то будет полезно поставить фокус на кнопку, которую пользователь вероятнее всего нажмёт. OK или Отмена в зависимости от ситуации.</li>
<li class="docs-markdown__li">Если внутри модального окна много контента, есть прокрутка, то установка фокуса на первый доступный элемент может автоматически промотать содержимое окна и убрать его начальные части из поля зрения. В этому случае надо добавить статическому элементу, расположенному начале контента, атрибут <code class="docs-markdown__code">tabindex=-1</code> и сфокусировать на нём. Этим элементом может быть заголовок, первый абзац и т. п.</li>
</ul>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="фокус-после-закрытия-модального-окна" id="фокус-после-закрытия-модального-окна"></span>
          Фокус после закрытия модального окна
        </div>
      <p class="docs-markdown__p">Когда диалог закрывается, по умолчанию фокус возвращается на элемент, который вызвал его. </p>
<p class="docs-markdown__p">Если триггеный элемент больше не существует, то фокус возвращается на другой элемент, подходящий логике взаимодействия</p>
<p class="docs-markdown__p">В некоторых ситуация фокус может специально возвращаться на другой элемент, не тот, что изначально открыл диалог</p>
<ul class="docs-markdown__ul">
<li class="docs-markdown__li">маловероятно, что пользователь захочет сразу же открыть тот же диалог</li>
<li class="docs-markdown__li">задача, выполненная в диалоговом окне, напрямую связана с последующим этапом рабочего процесса. Например, в таблице есть панель инструментов с кнопкой «Добавить строки». Кнопка открывает диалоговое окно и спрашивает количество новых строк. После закрытия диалога фокус помещается в первую ячейку первой новой строки. </li>
</ul>
<div class="docs-header-link docs-header-link_5">Управление с клавиатуры</div><table class="docs-markdown__table">
<thead class="docs-markdown__thead">
<tr class="docs-markdown__tr">
<th class="docs-markdown__th">Клавиша</th>
<th class="docs-markdown__th">Действие</th>
</tr>
</thead>
<tbody class="docs-markdown__tbody"><tr class="docs-markdown__tr">
<td class="docs-markdown__td"><span class="hot-key-Button">Ctrl</span> + <span class="hot-key-Button">↵</span></td>
<td class="docs-markdown__td">Выполняется основное действие диалога</td>
</tr>
<tr class="docs-markdown__tr">
<td class="docs-markdown__td"><span class="hot-key-Button">Esc</span></td>
<td class="docs-markdown__td">Закрыть диалог:<br>1. Если в диалоге не было изменения данных.<br>2. Если у элемента в фокусе нет собственного обработчика этой клавиши</td>
</tr>
<tr class="docs-markdown__tr">
<td class="docs-markdown__td"><span class="hot-key-Button">↵</span></td>
<td class="docs-markdown__td">Отправка формы по нажатию Enter в любом текстовом инпуте</td>
</tr>
</tbody></table>

        <div class="docs-header-link docs-header-link_3">
          <span header-link="валидация" id="валидация"></span>
          Валидация
        </div>
      <p class="docs-markdown__p">В теле окна может располагаться форма. Терминальные кнопки отправки формы должны располагаться в подвале окна. Валидация подчиняется общим правилам. </p>

        <div class="docs-header-link docs-header-link_3">
          <span header-link="дизайн-и-анимация" id="дизайн-и-анимация"></span>
          Дизайн и анимация
        </div>
      
        <div class="docs-header-link docs-header-link_4">
          <span header-link="положение" id="положение"></span>
          Положение
        </div>
      <p class="docs-markdown__p">Окно открывается центру экрана с отступом 48px от верхней границы экрана. Если у страницы была прокрутка, то не должно быть сдвига по горизонтали, когда отрылся диалог. Часто это происходит, когда скроллбар появляется и исчезает при открытии или закрытии модалки. </p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="размер" id="размер"></span>
          Размер
        </div>
      <table class="docs-markdown__table">
<thead class="docs-markdown__thead">
<tr class="docs-markdown__tr">
<th class="docs-markdown__th">Предустановка</th>
<th class="docs-markdown__th">Ширина</th>
</tr>
</thead>
<tbody class="docs-markdown__tbody"><tr class="docs-markdown__tr">
<td class="docs-markdown__td">Small</td>
<td class="docs-markdown__td">400</td>
</tr>
<tr class="docs-markdown__tr">
<td class="docs-markdown__td">Normal</td>
<td class="docs-markdown__td">640 по умолчанию</td>
</tr>
<tr class="docs-markdown__tr">
<td class="docs-markdown__td">Large</td>
<td class="docs-markdown__td">960</td>
</tr>
</tbody></table>
<p class="docs-markdown__p">В частности и никакой горизонтальной прокрутки в модальном окне также быть не должно.</p>
<div mosaic-docs-example="modal-sizes"></div>


        <div class="docs-header-link docs-header-link_4">
          <span header-link="панель-кнопок" id="панель-кнопок"></span>
          Панель кнопок
        </div>
      <p class="docs-markdown__p">Терминальные кнопки располагаются в правом нижнем углу в футере. Порядок: основное действие, второстепенное действие, отмена. Кнопки дополнительных действий располагаются в левом нижнем углу.</p>
<p class="docs-markdown__p"><font color="red"><strong>Тут нужна одна кнопка которая будет отрывать c тремя кнопками <a class="docs-markdown__a" href="https://www.figma.com/file/xDLkQRzr7g0RVrj8A0676E/Guide-patterns?node-id=11590%3A29036" target="_blank">ВОТ МАКЕТ</a></strong></font></p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="наложение-модальных-окон" id="наложение-модальных-окон"></span>
          Наложение модальных окон
        </div>
      <p class="docs-markdown__p">Открывать один модальный диалог из другого неправильно. Но если вдруг пришлось (экономия, вынужденная мера), то надо оставлять всего одно затемнение. А под ним уже располагать фон страницы и родительскую модалку. Делать несколько затемнений — ошибка.</p>
<p class="docs-markdown__p"><font color="red"><strong>Тут нужна одна кнопка которая будет отрывать уже открытое окно на котором открыто еще одно окно <a class="docs-markdown__a" href="https://wiki.ptsecurity.com/pages/viewpage.action?pageId=96272601&amp;preview=/96272601/96273467/mc-modal-overlap.png" target="_blank">как вот тут</a></strong></font></p>

        <div class="docs-header-link docs-header-link_3">
          <span header-link="доступность.-роли,-состояния-и-атрибуты-wai-aria" id="доступность.-роли,-состояния-и-атрибуты-wai-aria"></span>
          Доступность. Роли, состояния и атрибуты WAI-ARIA
        </div>
      <ul class="docs-markdown__ul">
<li class="docs-markdown__li">Элемент-контейнер диалога должен иметь роль <code class="docs-markdown__code">dialog</code></li>
<li class="docs-markdown__li">Все элементы, необходимые для работы с диалогом, являются потомками элемента с ролью <code class="docs-markdown__code">dialog</code></li>
<li class="docs-markdown__li">Элементу-контейнеру диалога указан атрибут <code class="docs-markdown__code">aria-modal=true</code></li>
<li class="docs-markdown__li">Диалог имеет<ul class="docs-markdown__ul">
<li class="docs-markdown__li">Свойства <code class="docs-markdown__code">aria-labelledby</code> ссылается на видимый заголовок диалога.</li>
<li class="docs-markdown__li">Название, определенной атрибутом <code class="docs-markdown__code">aria-label</code></li>
</ul>
</li>
<li class="docs-markdown__li">Опционально. Атрибут <code class="docs-markdown__code">aria-describedby</code> устанавливается для элемента с ролью <code class="docs-markdown__code">dialog</code>, чтобы указать, какие элементы в диалоге содержат контент, который описывает основную цель или сообщение диалога. Это даёт возможность скринридерам объявлять описание вместе с заголовком диалога и первоначально сфокусированным элементом при открытии диалога.</li>
</ul>

        <div class="docs-header-link docs-header-link_3">
          <span header-link="связанные-компоненты" id="связанные-компоненты"></span>
          Связанные компоненты
        </div>
      <p class="docs-markdown__p">Модальный диалог резко концентрирует на себе, заставляет терять фокус внимания, не дает взаимодействовать со станицей под ним. Поэтому в большинстве случаев нужно попытаться избежать модальности. Эти приёмы помогут бережно обойтись с пользователем и избежать наслоения модальных окон:</p>
<p class="docs-markdown__p"><a class="docs-markdown__a" href="/popover" target="_blank">Поповер</a> менее деструктивно перехватывает внимания пользователя. Он не мешают взаимодействовать с остальной частью страницы, не ограничивают свободу. Поповер легче закрыть случайно. Если система ждет важный ответ, или неочевидно, какое действие произойдет, если закрыть поповер, то используйте старый добрый модальный диалог. </p>
<p class="docs-markdown__p"><a class="docs-markdown__a" href="/sidepanel" target="_blank">Боковая панель</a> — что-то среднее между новой страницей и модальным окном. Она растянута по высоте на 100% окна браузера, и длинные и узкие страницы в ней выглядят лучше, чем в модальном окне, а широкие и невысокие хуже. Боковая панель отлично справляется с наложением одной на другую, а модальные окна так не стоит использовать с наслоением.</p>
<p class="docs-markdown__p"><strong>Инлайн-сообщение и инлайн-форма</strong> помогают показать новый контент на том же слое страницы и делают это менее раздражительно. Приём активно используется для вывода ошибок ко всей форме, или чтобы заранее предупредить пользователя о чем-то важном. Инлайн-формы помогают избежать модальных режимов, новых экранов, вложенности на сложных формах. Например, когда надо добавить в коллекцию новый объект из нескольких полей (имя, фамилия, отчество)</p>
<p class="docs-markdown__p"><strong>Аккордеон</strong>, прием «Показать ещё», <a class="docs-markdown__a" href="/tooltip" target="_blank">тултип</a> помогут, когда надо всего лишь показать дополнительный контент. Этот приём подойдет для менее важных вещей, чем при использовании инлайн-сообщений</p>
<p class="docs-markdown__p">Тост-уведомление на короткое время сообщит о результате операции или покажет совсем неважное сообщение. Тост-уведомления используется, когда нестрашно, если человек пропустит сообщение, когда сообщение может быстро потерять актуальность или есть другая возможность прочитать его. Например, в центре уведомлений. </p>
<p class="docs-markdown__p"><strong>Новая страница</strong> приходит на замену модальному окну, когда нужно показать много контента, длинную форму или список. Такой способ поможет полноценно представить контент, сфокусировать на нем без потери функциональности. Например, навигации. </p>
<p class="docs-markdown__p"><strong>Приём «Отменить изменения»</strong>. Вместо модального диалога «Вы уверены?», часто лучше сразу выполнить операцию и дать возможность ее отменить.</p>
</div>
<div class="docs-markdown"><p class="docs-markdown__p">Хорошо спроектированный интерфейс помогает пользователю не совершать ошибок, а когда они возникают, валидация помогает верно исправить ошибку. В этом гайде разберем, что для этого нужно делать.</p>
<br>
<div class="mc-alert mc-alert_warning">
    <i class="mc mc-icon mc-error_16 mc-alert__icon"></i>
    Все описанные ниже рекомендации не применяются к форме входа; как обрабатывать ошибки на ней, описано в отдельном гайде: <a class="docs-markdown__a" pseudo mc-link>http://mosaic.ptsecurity.com">Страница входа</a>
</div>



        <div class="docs-header-link docs-header-link_3">
          <span header-link="способы-валидации" id="способы-валидации"></span>
          Способы валидации
        </div>
      <p class="docs-markdown__p">От хорошего к более плохому:</p>
<ul class="docs-markdown__ul">
<li class="docs-markdown__li">защититься от ошибки,</li>
<li class="docs-markdown__li">показывать под полями,</li>
<li class="docs-markdown__li">показывать над формой.</li>
</ul>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="как-защититься-от-ошибки" id="как-защититься-от-ошибки"></span>
          Как защититься от ошибки
        </div>
      <p class="docs-markdown__p">Примеры, когда интерфейс не даёт совершить ошибку</p>
<table class="docs-markdown__table">
<thead class="docs-markdown__thead">
<tr class="docs-markdown__tr">
<th class="docs-markdown__th">Плохо</th>
<th class="docs-markdown__th">Хорошо</th>
</tr>
</thead>
<tbody class="docs-markdown__tbody"><tr class="docs-markdown__tr">
<td class="docs-markdown__td">Сообщать «Название обязательно»</td>
<td class="docs-markdown__td">Блокировать кнопку, пока не задано название</td>
</tr>
<tr class="docs-markdown__tr">
<td class="docs-markdown__td">Сообщать «Название невалидно»</td>
<td class="docs-markdown__td">Автоматически заменить пробелы на _, чтобы все было валидно</td>
</tr>
<tr class="docs-markdown__tr">
<td class="docs-markdown__td">Сообщать «Введите число»</td>
<td class="docs-markdown__td">Использовать контролы ввода чисел</td>
</tr>
</tbody></table>

        <div class="docs-header-link docs-header-link_3">
          <span header-link="когда-проверять-на-ошибки" id="когда-проверять-на-ошибки"></span>
          Когда проверять на ошибки
        </div>
      <p class="docs-markdown__p">Есть три способа проверить верность введенных значений:</p>
<ol class="docs-markdown__ol">
<li class="docs-markdown__li">Во время ввода значения</li>
<li class="docs-markdown__li">По уходу с поля (потере фокуса)</li>
<li class="docs-markdown__li">После отправки формы</li>
</ol>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="во-время-ввода-значения" id="во-время-ввода-значения"></span>
          Во время ввода значения
        </div>
      <p class="docs-markdown__p">Иногда можно предотвратить неверный ввод значений, в таких случаях нужно запрещать ввод определённых символов, например букв в IP-адрес или в другой числовой формат. В этом случае запрещенные символы не вводятся и показывается желтый тултип на 3 секунды, после этого скрывается.</p>
<p class="docs-markdown__p"><strong>!!! Доработать пример, добавить подскаку под полем «Только буквы и цифры» !!!</strong></p>
<div mosaic-docs-example="validation-on-type"></div>

<div class="docs-header-link docs-header-link_5">Диапазоны значений</div><p class="docs-markdown__p">Делайте так, чтобы нельзя было задать неправильно. Например, при вводе периода можно менять местами значения «С» и «По», если значение в «По» будут указаны раньше значения в «С».</p>

        <div class="docs-header-link docs-header-link_4">
          <span header-link="по-уходу-с-поля" id="по-уходу-с-поля"></span>
          По уходу с поля
        </div>
      <p class="docs-markdown__p">Проверка на верность введеных значений в поле выполняется по потере фокуса (onblur), поля получают состояние ошибки. Поля получают нормальное состояние по изменению значения (onchange).</p>
<p class="docs-markdown__p">Если у поля есть подпись, то текст ошибки выводится под подписью</p>
<br>
<div class="mc-alert mc-alert_warning">
    <i class="mc mc-icon mc-error_16 mc-alert__icon"></i>
    Пустые обязательные поля по onblur не получают состояние ошибки
</div>

<div mosaic-docs-example="validation-on-blur"></div>

<div class="docs-header-link docs-header-link_5">Составные поля</div><p class="docs-markdown__p">Если поля нуждаются в валидации <a class="docs-markdown__a" href="/validation/overview#%D0%92%D0%BE-%D0%B2%D1%80%D0%B5%D0%BC%D1%8F-%D0%B2%D0%B2%D0%BE%D0%B4%D0%B0-%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F" target="_blank">во время ввода значения</a> или <a class="docs-markdown__a" href="/validation/overview#%D0%9F%D0%BE-%D1%83%D1%85%D0%BE%D0%B4%D1%83-%D1%81-%D0%BF%D0%BE%D0%BB%D1%8F" target="_blank">по уходу с поля</a>, то сначала выполняются эти проверки. После того как все значения валидны, срабатывает валидация на все поля, поля выделятся фоном и внизу пишется сообщение об ошибке.</p>
<div mosaic-docs-example="validation-composite"></div>


        <div class="docs-header-link docs-header-link_4">
          <span header-link="после-отправки-формы" id="после-отправки-формы"></span>
          После отправки формы
        </div>
      <div class="docs-header-link docs-header-link_5">Глобальная ошибка</div><p class="docs-markdown__p">При самой аккуратной валидации отдельных полей всегда что-то может пойти не так: пропадет соединение с БД, другой пользователь изменит данные системы и т. д. Если ошибка возникла или выявилась после нажатия на терминальные кнопки и не связана с ошибками в полях, то такая ошибка показывается алертом над формой и страница прокручивается до алерта с ошибкой.</p>
<p class="docs-markdown__p">Такой алерт пропадает при повторной отправке или если ошибка исправлена. В остальных случаях он висит и не скрывается, давая пользователю информацию, что было не так.</p>
<br>
<div class="mc-alert mc-alert_info">
        <i class="mc mc-icon mc-info-o_16 mc-alert__icon"></i>
    При повторной отправке формы все поля проверяются ещё раз. За время, пока пользователь дозаполнял форму, уникальность названия, например, могла пропасть.
</div>

<div mosaic-docs-example="validation-global"></div>

<div class="docs-header-link docs-header-link_5">Ошибки в полях</div><p class="docs-markdown__p">Если не удалось сделать валидацию в полях во время ввода или по уходу с поля, то после отправки формы, страница прокручивается до первого поля с ошибкой и поле получает фокус.</p>
<br>
<div class="mc-alert mc-alert_warning">
    <i class="mc mc-icon mc-error_16 mc-alert__icon"></i>
    Не блокируйте терминальную кнопку после отправки формы
</div>


        <div class="docs-header-link docs-header-link_3">
          <span header-link="обязательные-поля" id="обязательные-поля"></span>
          Обязательные поля
        </div>
      <p class="docs-markdown__p">По умолчанию подразумевается, что все поля обязательные, обязательность никак не помечается. А необязательные как раз подписываются (или в плейсхолдере, или в подписи под полем).</p>
<br>
<div class="mc-alert mc-alert_info">
        <i class="mc mc-icon mc-info-o_16 mc-alert__icon"></i>
        Поля «комментарий», «описание» почти всегда необязательные, воспринимаются таковыми. Их можно не подписывать как необязательные.
</div>
<br>

<p class="docs-markdown__p">Состояние ошибки незаполненное обязательное поле получает только после отправки формы, в тексте ошибки сообщается (1), по каким причинам поле обязательно.</p>
<p class="docs-markdown__p"><em>(1) Иногда текстом ошибки можно пренебречь, если из контекста формы понятно, что поле обязательно для заполнение или текст ошибки получается очень длинным.</em></p>
<p class="docs-markdown__p">Пустые обязательные поля не получают состояние ошибки при потере фокуса.</p>
<br>
 <div class="mc-alert mc-alert_dismissible">
            <div>
                <header>Совет</header>
                Чтобы избежать проверки на незаполненность полей, можно использовать контролы с предустановленными значениями, которые нельзя оставить незаполненными (раскрывающийся список, радиокнопки)
            </div>
        </div>

<div mosaic-docs-example="validation-overview"></div>


        <div class="docs-header-link docs-header-link_4">
          <span header-link="обязательные-поля-на-небольших-формах" id="обязательные-поля-на-небольших-формах"></span>
          Обязательные поля на небольших формах
        </div>
      <p class="docs-markdown__p">На небольших формах, где обязательные поля очевидны, терминальные кнопки лучше заблокировать до заполнения полей.</p>
<br>
<div class="mc-alert mc-alert_warning">
    <i class="mc mc-icon mc-error_16 mc-alert__icon"></i>
    В больших формах не рекомендуется блокировать терминальные кнопки, может быть неочевидно, почему кнопка отправки формы неактивна.
</div>

<div mosaic-docs-example="validation-small"></div>


        <div class="docs-header-link docs-header-link_4">
          <span header-link="другие-случаи" id="другие-случаи"></span>
          Другие случаи
        </div>
      <p class="docs-markdown__p">Бывают случаи, когда нужно заполнить хотя бы одно из обязательных полей. В этом случае после отправки формы, обязательные поля не получают состояние ошибки, но выводится алерт.</p>
<p class="docs-markdown__p">Текст алерта для каждого случая будет свой.</p>
<p class="docs-markdown__p"><strong>!!!Пример глобальной ошибки с указанием обязательных полей в тексте ошибки!!!</strong></p>

        <div class="docs-header-link docs-header-link_3">
          <span header-link="показ-сообщений-об-ошибках-вне-форм" id="показ-сообщений-об-ошибках-вне-форм"></span>
          Показ сообщений об ошибках вне форм
        </div>
      <p class="docs-markdown__p">Иногда требуется показывать ошибки вне форм, например было запущено сканирование, но в процессе сервер вернул ошибку, в таком случае показывайте уведомление в центре уведомлений.</p>
</div>